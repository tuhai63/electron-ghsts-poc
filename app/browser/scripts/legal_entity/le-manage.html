<div style="width:100%" layout="column">
    <md-toolbar class="md-whiteframe-z1" layout="row">
        <md-button class="md-warn" aria-label="Home" ng-href="#/home">Home</md-button>
        <h2>
          <span>Legal Entity Management</span>
        </h2>
    </md-toolbar>
    <div style="width:100%" layout="row">
        <md-sidenav class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="true">
            <!--  md-is-locked-open="$mdMedia('gt-sm')"-->
            <md-toolbar layout="row" class="md-whiteframe-z1">
                <md-headline layout-padding>Legal Entities</md-headline>
            </md-toolbar>
            <md-input-container style="margin-bottom:0">
                <label>Legal Entity</label>
                <input required name="legalEntityName" ng-model="_ctrl.filterText" ng-change="_ctrl.filterLegalEntity()">
            </md-input-container>
            <md-list>
                <!-- notice work around for nedb. 'track by index'' to fix $$hashkey problem -->                
                <md-list-item ng-repeat="it in _ctrl.legalEntities track by $index" ng-click="_ctrl.selectLegalEntity(it, $index)">
                    <!--md-icon class="material-icons" aria-label="Legal Entity" ng-show="it.LEGALENTITY_TYPE.VALUE != 'Regulatory Authority'">business</md-icon-->
                    <md-icon class="material-icons" aria-label="Legal Entity">business</md-icon>                    
                    <p>{{it.LEGALENTITY_NAME}}</p>
                </md-list-item>
            </md-list>
        </md-sidenav>

        <div flex layout="column" tabIndex="-1" role="main" class="md-whiteframe-z2">            
            <md-toolbar layout="row" class="md-whiteframe-z1">
                <md-headline layout-padding>{{ _ctrl.selected.LEGALENTITY_NAME }}</md-headline>
            </md-toolbar>            
                         
            <md-content layout-padding class="autoScroll">
                <form name = "leForm">
                    <div layout-gt-xs="row">
                        <md-input-container class="md-block" flex-gt-xs>                        
                            <label>Identifier</label>
                            <input ng-model="_ctrl.selected._identifier">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container  class="md-block" flex-gt-sm>
                            <label>Name</label>
                            <input ng-model="_ctrl.selected.LEGALENTITY_NAME" type="text">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>PID</label>
                            <input ng-model="_ctrl.selected.LEGALENTITY_PID" type="text" ng-required="false">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container>
                            <label>Type</label>
                            <input ng-model="_ctrl.selected.LEGALENTITY_TYPE.VALUE" type="text">
                        </md-input-container>                        
                        <md-input-container>
                            <label>Status</label>
                            <input ng-model="_ctrl.selected.METADATA_STATUS.VALUE" type="text">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Address</label>
                            <input ng-model="_ctrl.selected.CONTACT_ADDRESS.STREET1" type="text">
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <input ng-model="_ctrl.selected.CONTACT_ADDRESS.STREET2" placeholder="Address Line 2" type="text">
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>City</label>
                            <input ng-model="_ctrl.selected.CONTACT_ADDRESS.CITY" type="text">
                        </md-input-container>                        
                        <md-input-container>
                            <label>State/Provice</label>
                            <input ng-model="_ctrl.selected.CONTACT_ADDRESS.STATE" type="text">
                        </md-input-container>
                        <md-input-container>
                            <label>Country</label>
                            <input ng-model="_ctrl.selected.CONTACT_ADDRESS.COUNTRY.VALUE_DECODE" type="text">
                        </md-input-container>
                    </div>
                    
                    <md-toolbar>
                        <div class="md-toolbar-tools">
                            <h2>Identifier</h2>
                            <span flex></span>
                                <md-button class="md-icon-button" ng-click="_ctrl.addIdentifier()">
                                <md-icon class="material-icons" aria-label="Add Identifier">note_add</md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>
                    <md-list>
                        <md-list-item ng-repeat="id in _ctrl.selected.LEGALENTITY_IDENTIFIER track by $index" class="noright">
                            <md-input-container class="md-block" flex-gt-sm>
                                <md-icon class="material-icons" aria-label="Other Name">note</md-icon> 
                                <label>Identifer</label>
                                <input ng-model="_ctrl.selected.LEGALENTITY_IDENTIFIER[$index].IDENTIFIER" type="text">
                            </md-input-container>
                            <md-input-container class="md-block" flex-gt-sm>
                                <md-icon class="material-icons" aria-label="Other Name">note</md-icon> 
                                <input ng-model="_ctrl.selected.LEGALENTITY_IDENTIFIER[$index].IDENTIFIER" type="text">
                            </md-input-container>
                            <md-button class="md-secondary md-raised md-warn" ng-click="_ctrl.deleteIdentifier(id, $event)">Delete</md-button>                                                          
                        </md-list-item>
                    </md-list>
                    
                    <md-toolbar>
                        <div class="md-toolbar-tools">
                            <h2>Other Name</h2>
                            <span flex></span>
                                <md-button class="md-icon-button" ng-click="_ctrl.addOtherName()">
                                <md-icon class="material-icons" aria-label="Add Other Name">note_add</md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>
                    <md-list>
                        <md-list-item ng-repeat="otherName in _ctrl.selected.OTHER_NAME track by $index" class="noright">
                                <md-input-container class="md-block" flex="80">
                                    <!--md-icon class="material-icons" aria-label="Other Name">note</md-icon--> 
                                    <label>Other Name</label>
                                    <input ng-model="_ctrl.selected.OTHER_NAME[$index]" type="text">
                                </md-input-container>
                                <md-button class="md-secondary md-raised md-warn" ng-click="_ctrl.deleteOtherName(otherName, $event)">Delete</md-button> 
                        </md-list-item>
                    </md-list>
                    
                    <!--div layout-gt-sm="row" ng-repeat="otherName in _ctrl.selected.OTHER_NAME track by $index">                        
                        <md-input-container class="md-block" flex-gt-sm>
                            <md-icon class="material-icons" aria-label="Other Name">note</md-icon> 
                            <input ng-model="_ctrl.selected.OTHER_NAME[$index]" type="text">                            
                        </md-input-container>
                        <span flex></span>                        
                        <md-input-container class="md-block" flex-gt-sm>
                            <md-button class="md-secondary md-raised md-warn" ng-click="_ctrl.deleteOtherName(otherName, $event)">Delete</md-button>
                        </md-input-container> 
                    </div-->   
                    
                    <md-toolbar>
                        <div class="md-toolbar-tools">
                            <h2>Contact Person</h2>
                            <span flex></span>
                                <md-button class="md-icon-button" ng-click="_ctrl.showContactPersonDiag({}, $event)">
                                <md-icon class="material-icons" aria-label="Add Person">person_add</md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>
                    <md-list>
                        <md-list-item ng-repeat=" person in _ctrl.selected.CONTACT_PERSON track by $index" ng-click="_ctrl.showContactPersonDiag(person, $event)" class="noright">
                            <md-icon class="material-icons" aria-label="Person">person</md-icon>
                            <p>{{ person.FIRSTNAME + ' ' + person.LASTNAME }}</p>         
                            <md-button class="md-secondary md-raised md-warn" ng-click="_ctrl.deleteContactPerson(person, $event)">Delete</md-button>                                                          
                        </md-list-item>
                    </md-list>
                </form>
            </md-content>
            <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>     
                <!--md-button class="md-raised md-info" ng-click="_ctrl.createLegalEntity()">Add</md-button-->
                <md-button class="md-raised md-primary" ng-click="_ctrl.saveLegalEntity()">Save</md-button>
                <md-button class="md-raised md-danger" ng-click="_ctrl.cancelEdit()">Cancel</md-button>
                <md-button class="md-raised md-warn" ng-click="_ctrl.deleteLegalEntity()">Delete</md-button>      
                <md-button class="md-raised md-primary" ng-click="_ctrl.viewLegalEntityJson()">View LE JSON</md-button>                
                <md-button class="md-raised md-primary" ng-click="_ctrl.viewLegalEntityGHSTS()">View LE GHSTS</md-button>                                      
                
                <md-button class="md-raised md-warn" ng-click="_ctrl.addTestLE()">Add Sample LE to DB</md-button>   
                <md-button class="md-raised md-warn" ng-click="_ctrl.initializeLE()">Initalize DB with Sample GHSTS LE</md-button>
                
            </section>  
        </div>
    </div>
</div>